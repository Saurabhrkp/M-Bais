<%- include('./partials/navbar') %> <% if(user){ %>
<div class="row justify-content-center mr-0 ml-2">
  <% for( let i = 0; i < posts.docs.length; i++ ) { const post = posts.docs[i]
  %>
  <div class="card text-white bg-dark m-3">
    <div class="card-body">
      <h5 class="card-title"><%= post.title %></h5>
      <h6 class="card-subtitle text-muted"><%= post.description %></h6>
      <h6 class="card-subtitle text-muted mt-2">
        <% post.tags.forEach(tag => { %>
        <span class="bg-warning text-white"><%= tag %></span>
        <% });%>
      </h6>
    </div>
    <div class="card-body py-0">
      <a href="/<%= post.slug %>"
        ><img
          class="img-fluid"
          style="width: 500px;"
          src="<%= post.thumbnail.source %>"
          alt="<%= post.thumbnail.key %>"
      /></a>
    </div>
    <div class="card-body">
      <a href="#" class="card-link">
        <span class="bg-info text-white"><%= post.author.name %></span></a
      >
    </div>
    <div class="card-footer text-muted">
      <%= post.publishedDate %>
    </div>
  </div>
  <% } %>
</div>

<div class="row justify-content-center mr-0">
  <ul class="pagination">
    <li class="page-item <% if(posts.page <= 1) { %> disabled <% } %>">
      <a
        class="page-link"
        href="?page=<%= posts.page <= 1 ? 1 : posts.page - 1 %>"
        >&laquo;</a
      >
    </li>
    <% for (let i = 1 ; i <= posts.totalPages; i++) {%>
    <li class="page-item<% if(posts.page == i) { %> active <% } %>">
      <a class="page-link" href="?page=<%= i %>"><%= i %></a>
    </li>
    <% }%>
    <li
      class="page-item<% if(posts.page == posts.totalPages) { %> disabled <% } %>"
    >
      <a
        class="page-link"
        href="?page=<%= posts.page > posts.totalPages - 1 ? posts.totalPages : 1 + posts.page %>"
        >&raquo;</a
      >
    </li>
  </ul>
</div>

<% } else{ %> <%- include('./partials/index') %> <% } %>
<%-include('./partials/footer.ejs') %>
