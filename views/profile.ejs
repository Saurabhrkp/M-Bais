<%- include('./partials/navbar') %>
<div class="container card bg-light shadow my-4">
  <div class="row justify-content-center">
    <div
      class="col-sm-5 col-md-4 col-lg-3 justify-content-center"
      style="max-width: 20rem;"
    >
      <% if (profile.avatar != null) { %>
      <img
        src="<%=profile.avatar.source%>"
        alt="<%=profile.avatar.key%>"
        class="card-body img-fluid col rounded-circle"
      />
      <% } else {%>
      <img
        src="/img/profile-image.jpg"
        alt="profile-image"
        class="card-body img-fluid col rounded-circle"
      />
      <% }%>
    </div>
    <div class="col-sm-10 col-md-8 col-lg-9">
      <h4 class="card-title pt-4"><%= profile.username%></h4>
      <div>
        <p class="text-muted mb-0">Email</p>
        <h4 class="card-title text-lowercase"><%= profile.email%></h4>
      </div>
      <form
        id="profileForm"
        action="/api/<%=profile.username%>?_method=PUT"
        method="POST"
      >
        <fieldset>
          <div class="form-group">
            <label for="forname">Name</label>
            <input
              type="name"
              name="name"
              class="form-control"
              id="forname"
              placeholder="Update name"
              value="<%= typeof profile.name != 'undefined' ? profile.name : '' %>"
            />
          </div>
          <div class="form-group">
            <label for="forBio">Bio</label>
            <textarea
              type="name"
              name="shortBio"
              class="form-control"
              id="forBio"
              placeholder="Enter your bio here"
            >
<%= typeof profile.shortBio != 'undefined' ? profile.shortBio : '' %></textarea
            >
          </div>
        </fieldset>
        <% if (profile.id === user.id) { %>
        <input
          type="button"
          class="mb-3 btn btn-outline-warning btn-sm hidden"
          id="editProfile"
          value="Edit Profile"
        />
        <input
          type="submit"
          class="mb-3 btn btn-outline-success btn-sm"
          id="submitProfile"
          value="Save Profile"
        /><% } %>
      </form>
    </div>
  </div>
</div>
<div class="container card bg-light shadow my-4">
  <div class="list-group mb-3">
    <div class="text-center">
      <% if (profile.liked.length<=0) { %>
      <h3 class="mt-3">No Liked Posts</h3>
      <% } else { %>
      <h3 class="mt-3">Liked Posts</h3>
      <% } %>
    </div>
    <% for( let i = 0; i < profile.liked.length; i++ ) { const liked =
    profile.liked[i] %>
    <a href="/<%= liked.slug%>"
      ><div class="list-group-item list-group-item-action flex-column">
        <div class="w-100 mb-2">
          <img
            src="<%= liked.thumbnail.source %>"
            class="d-inline-block mr-2"
            style="width: 200px;"
            alt="<%= liked.thumbnail.key %>"
          />
          <div class="mt-2 text-capitalize d-inline-block">
            <h5><%= liked.title %></h5>
            <p><%= liked.description %></p>
          </div>
        </div>
        <a href="/api/<%= liked.author.username%>" class="w-100">
          <img
            src="<%= liked.author.avatar.source %>"
            class="d-inline-block mr-2 rounded-circle"
            style="width: 40px;"
            alt="<%= liked.author.avatar.key %>"
          />
          <p class="mb-0 d-inline-block">By <%= liked.author.name %></p>
        </a>
        <small class="text-muted"
          ><%= moment(liked.publishedDate).fromNow()%></small
        >
      </div></a
    >
    <%}%>
  </div>
</div>
<%-include('./partials/footer.ejs') %>
